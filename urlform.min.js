"use strict";var h={id:"",prefix:"",shareURLBtn:"#shareURLBtn",shareURL:"#shareURL",shareURLArea:"#shareURLArea",defaultQueryLocation:"fragment",preserveExtra:!1,callback:null,cleanURL:!1,URLFormJS_Sanitized:!1,URLFormJS_Inited:!1,URLFormJS_HasForm:!1,URLFormJS_FormElement:HTMLFormElement,URLFormJS_ShareURLBtnElement:HTMLButtonElement},a,c;function k(e,r){c=e,a={},a=I(r),a.URLFormJS_ShareURLBtnElement=document.querySelector(a.shareURLBtn),a.URLFormJS_ShareURLBtnElement!=null&&a.URLFormJS_ShareURLBtnElement.addEventListener("click",()=>g()),i(a.id)||(a.URLFormJS_FormElement=document.getElementById(a.id),a.URLFormJS_FormElement===null?console.warn("URLFormJS: Could not find the form for the given 'id' in 'FormOptions'."):a.URLFormJS_HasForm=!0),a.URLFormJS_Inited=!0}function b(){if(!a.URLFormJS_Inited)throw new Error("URLFormJS: Init() must be called first to initialize the URLFormJS module.");J(d().pairs),g()}function J(e){if(!a.URLFormJS_Inited)throw new Error("URLFormJS: Init() must be called first to initialize the URLFormJS module.");v(e)}function d(){let e={query:window.location.search,queryPairs:E(),fragment:R(),fragmentParts:F(),fragmentPairs:p()};return e.pairs={...e.queryPairs,...e.fragmentPairs},e}function E(){var e=new URL(window.location.href);let r={};for(var t of e.searchParams.entries())r[t[0]]=t[1];return r}function p(){let e=F().query;var r={};return i(e)||e.split("&").forEach(t=>{let n=t.split("=");if(n[1]===void 0){r[n[0]]=null;return}r[n[0]]=decodeURI(n[1])}),r}function R(){var e=window.location.hash.split("#");return navigator.userAgent.includes("Firefox")||(e=performance.getEntriesByType("navigation")[0].name.split("#")),e.length<2?"":e[1]}function F(){let e={before:"",query:"",after:""},r=R().split("?");if(r.length>1)e.before=r[0],e.query=r[1];else return e.before=r[0],e;if(!i(e.query)){let t=e.query.split(":~:");t.length>1&&(e.query=t[0],e.after=":~:"+t[1])}return e}function v(e){try{for(let r of c){let t=r.name,n=e[t],f=r.id;if(i(f)&&(f=a.prefix+t),i(r.func)||r.func(),r.type=="bool"&&r.funcTrue!==void 0&&n!==void 0&&n!==""&&(n==="true"||n===!0)&&r.funcTrue(),!i(n)){if(r.type=="bool"&&(n=="true"||n===!0)){let u=document.getElementById(f);u!=null&&(u.checked=!0);continue}let l=document.getElementById(f);l!=null&&(l.value=n)}}}finally{i(a.callback)||a.callback()}}function I(e){let r={...h};if(i(e))return r;if(!(!i(e.URLFormJS_Sanitized)&&e.URLFormJS_Sanitized===!0))return i(e.id)||(r.id=e.id),i(e.prefix)||(r.prefix=e.prefix),i(e.shareURLArea)||(r.shareURLArea=e.shareURLArea),i(e.shareURL)||(r.shareURL=e.shareURL),i(e.shareURLBtn)||(r.shareURLBtn=e.shareURLBtn),i(e.defaultQueryLocation)||(r.defaultQueryLocation=e.defaultQueryLocation),r.defaultQueryLocation!=="query"&&(r.defaultQueryLocation=h.defaultQueryLocation),i(e.preserveExtra)||(r.preserveExtra=e.preserveExtra),i(e.callback)||(r.callback=e.callback),i(e.cleanURL)||(r.cleanURL=e.cleanURL),r.URLFormJS_Sanitized=!0,r}function g(){let e=d(),r=Object.keys(e.fragmentPairs);var t=new URL(window.location.origin+window.location.pathname);for(let o of c){let s=o.name,L=o.id,y=s;i(L)||(y=L);var n=document.getElementById(a.prefix+y);let m;n!==null&&(m=n.value,o.type==="bool"&&(n.checked?m="true":m="")),(o.queryLocation===""||i(o.queryLocation)||o.queryLocation!=="fragment"||o.queryLocation!=="query")&&(o.queryLocation=a.defaultQueryLocation);let U=i(m);!U&&(o.queryLocation==="fragment"||r.includes(s))?e.fragmentPairs[s]=m:U?(t.searchParams.delete(s),delete e.fragmentPairs[s]):t.searchParams.set(s,m)}let f=P();if(!i(f.query)&&!a.cleanURL)for(let o in f.query)t.searchParams.set(o,f.query[o]);t.hash=w(e,f);let l=document.querySelector(a.shareURL);l!==null&&(l.innerHTML=t.href.link(t.href));let u=document.querySelector(a.shareURLArea);return u!==null&&(u.innerHTML=t.href),t}function P(){let e=d(),r={query:{},frag:{},queryKeys:[],fragKeys:[]},t=Object.keys(e.queryPairs),n=Object.keys(e.fragmentPairs),f=[];for(let l of c)f.push(l.name);for(let l of t)f.includes(l)||(r.query[l]=e[l],r.queryKeys.push(l));for(let l of n)f.includes(l)||(r.frag[l]=e.pairs[l],r.fragKeys.push(l));return r}function w(e,r){if(i(e.fragmentParts))return"";let t="#";i(e.fragmentParts.before)||(t+=e.fragmentParts.before),t+="?";var n=Object.keys(e.fragmentPairs).length-1,f=0,l="&";n===0&&(l="");for(let u in e.fragmentPairs)f===n&&(l=""),f++,!r.fragKeys.includes(u)&&(t+=u+"="+e.fragmentPairs[u]+l);if(!i(r.frag)&&!a.cleanURL){f=0,l="&",n=r.fragKeys.length-1;for(let u in r.frag)f===n&&(l=""),f++,t+=u+"="+r.frag[u]+l}return t+=e.fragmentParts.after,t}function B(){return JSON.stringify(S())}function x(){return JSON.stringify(q())}function S(){if(!a.URLFormJS_Inited)throw new Error("URLFormJS: Init() must be called first to initialize the URLFormJS module.");var e={};for(let t of c){let n=t.name;i(t.id)||(n=t.id);var r=document.getElementById(a.prefix+n);let f;r!==null&&(f=r.value,t.type==="bool"&&(f=r.checked)),i(f)||(e[t.name]=f)}return e}function q(){if(!a.URLFormJS_Inited)throw new Error("URLFormJS: Init() must be called first to initialize the URLFormJS module.");if(!a.URLFormJS_HasForm)throw new Error("URLFormJS: Could not find the HTMLFormElement in the GUI. Current 'id' in 'FormOptions': "+a.id);var e=new FormData(a.URLFormJS_FormElement),r={};for(let[t,n]of e)(n=="true"||n=="on")&&(n=!0),(n=="false"||n=="unchecked")&&(n=!1),i(a)||i(a.prefix)||(t=t.substring(a.prefix.length)),i(n)||(r[t]=n);return r}function z(){if(!a.URLFormJS_Inited)throw new Error("URLFormJS: Init() must be called first to initialize the URLFormJS module.");for(let e of c){let r=a.prefix+e.name,t=e.id;if(i(t)&&(t=r),e.type=="bool"){let f=document.getElementById(t);f!=null&&(f.checked=!1);continue}let n=document.getElementById(t);n!=null&&(n.value="")}}function Q(){if(!a.URLFormJS_Inited)throw new Error("URLFormJS: Init() must be called first to initialize the URLFormJS module.");if(!a.URLFormJS_HasForm)throw new Error("URLFormJS: Could not find the HTMLFormElement in the GUI. Current 'id' in 'FormOptions': "+a.id);for(let e of a.URLFormJS_FormElement.elements)e.type==="checkbox"?e.checked=!1:e.value=""}function H(){return i(S())}function i(e){return typeof e=="function"?!1:Array.isArray(e)?i(e[0]):e===Object(e)?Object.keys(e).length===0:!_(e)}function _(e){return!(e===!1||e==="false"||e===void 0||e==="undefined"||e===""||e===0||e==="0"||e===null||e==="null"||e==="NaN"||Number.isNaN(e)||e===Object(e))}"use strict";export{z as Clear,Q as ClearForm,h as DefaultFormOptions,a as FormOptions,c as FormParameters,k as Init,H as IsEmpty,S as Objectify,q as ObjectifyForm,b as PopulateFromURI,J as PopulateFromValues,B as Serialize,x as SerializeForm};
