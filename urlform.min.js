var R={prefix:"",shareURLBtn:"#shareURLBtn",shareURL:"#shareURL",shareURLArea:"#shareURLArea"},s,i,m,h=!1;function I(e,r){i=e,s={},s=v(r),m=document.querySelector(s.shareURLBtn),m!=null&&m.addEventListener("click",U),h=!0}async function F(){if(!h)throw new Error("URLFormJS: Init() must be called first to initialize the URLFormJS module.");if(t(i))return;var e=new URL(window.location.href);let r={};for(var a of e.searchParams.entries())r[a[0]]=a[1];var f=window.location.hash.substring(1);if(!t(f)){let n=f.split("?");t(n[1])||n[1].split("&").forEach(o=>{let l=o.split("=");if(l[1]===void 0){r[l[0]]=null;return}r[l[0]]=unescape(l[1])})}t(r)||(p(r),U())}function p(e){if(!h)throw new Error("URLFormJS: Init() must be called first to initialize the URLFormJS module.");t(i)||y(e)}function y(e){for(let r in i){let a=i[r].name,f=i[r].id,n=i[r].type,u=e[a],o=i[r].funcTrue,l=i[r].func;if(a=s.prefix+a,t(f)&&(f=a),t(l)||l(),n=="bool"&&o!==void 0&&u!==void 0&&(u===""||u==="true"||u===!0)&&o(),!t(u)){if(n=="bool"&&(u=="true"||u===!0)){let c=document.getElementById(f);c!=null&&(c.checked=!0);continue}let d=document.getElementById(f);d!=null&&(d.value=u)}}}function v(e){if(e.FormJs_Sanitized===!0)return;let r={...R};return t(e)||(t(e.prefix)||(r.prefix=e.prefix),t(e.shareURLArea)||(r.shareURLArea=e.shareURLArea),t(e.shareURL)||(r.shareURL=e.shareURL),t(e.shareURLBtn)||(r.shareURLBtn=e.shareURLBtn),r.FormJs_Sanitized=!0),r}function U(){if(t(i))return;var e=new URL(window.location.href);for(let l in i){var r=i[l].name,a=i[l].id,f=i[l].type;let d=r;t(a)||(d=a);var n=document.getElementById(s.prefix+d);let c;n!==null&&(c=n.value,f=="bool"&&(n.checked?c="true":c="")),t(c)?e.searchParams.delete(r):e.searchParams.set(r,c)}t(e.hash.substring(1))&&(e.hash="");let u=document.querySelector(s.shareURL);u!=null&&(u.innerHTML=e.href.link(e.href));let o=document.querySelector(s.shareURLArea);return o!=null&&(o.innerHTML=e.href),e}function B(e){return JSON.stringify(L(e))}function L(e){var r=new FormData(e),a={};for(let[f,n]of r)(n=="true"||n=="on")&&(n=!0),(n=="false"||n=="unchecked")&&(n=!1),t(s)||t(s.prefix)||(f=f.substring(s.prefix.length)),t(n)||(a[f]=n);return a}function S(){if(!h)throw new Error("URLFormJS: Init() must be called first to initialize the URLFormJS module.");if(!t(i))for(let e in i){let r=s.prefix+i[e].name,a=i[e].id,f=i[e].type;if(t(a)&&(a=r),f=="bool"){let u=document.getElementById(a);u!=null&&(u.checked=!1);continue}let n=document.getElementById(a);n!=null&&(n.value="")}}function E(e){return t(L(e))}function t(e){return typeof e=="function"?!1:Array.isArray(e)?t(e[0]):e===Object(e)?Object.keys(e).length===0:!w(e)}function w(e){return!(e===!1||e==="false"||e===void 0||e==="undefined"||e===""||e===0||e==="0"||e===null||e==="null"||e==="NaN"||Number.isNaN(e)||e===Object(e))}export{S as Clear,R as DefaultFormOptions,I as Init,E as IsEmpty,L as Objectify,F as PopulateFromURI,p as PopulateFromValues,B as Serialize};
